<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ page.title }} | {{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
  {% include nav.html %}
  <main class="container">
    {{ content }}
  </main>
  <footer class="footer">
    Â© {{ site.title }} Â· {{ site.time | date: '%Y' }}
  </footer>

  <!-- ğŸ”€ Theme toggle script -->
  <script>
    (function(){
      const KEY = 'fe-notes:theme';
      const root = document.documentElement;
      const btn = document.getElementById('theme-toggle');

      function label(t){
        return t === 'light' ? 'ğŸŒ ë¼ì´íŠ¸' : 'ğŸŒ™ ë‹¤í¬';
      }
      function setTheme(t){
        root.setAttribute('data-theme', t);
        try { localStorage.setItem(KEY, t); } catch(e){}
        if(btn){ btn.textContent = label(t); }
      }

      // ì´ˆê¸° í…Œë§ˆ ê²°ì •: ì €ì¥ â†’ OS ì„ í˜¸ â†’ ê¸°ë³¸ ë‹¤í¬
      let init = 'dark';
      try {
        init = localStorage.getItem(KEY) ||
               (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
      } catch(e){}

      setTheme(init);

      if(btn){
        btn.addEventListener('click', function(){
          const next = (root.getAttribute('data-theme') === 'light') ? 'dark' : 'light';
          setTheme(next);
        });
      }
    })();
  </script>
</body>
</html>
